<!doctype html>
<!--[if IE 9]><html class="lt-ie10" lang="en" > <![endif]-->
<html class="no-js" lang="en" data-useragent="Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>No Suspend | #MBHHack</title>
  <link rel="stylesheet" href="stylesheets/style.css"/>
  <link rel="stylesheet" href="stylesheets/animate.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.0/css/foundation.css"/>
  <link rel="stylesheet" href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.js"></script>
</head>
<body> 
  <header class="header row animated fadeIn">
    <div class="large-3 columns">
      <h1><img src="images/Logo.png" alt="No Suspend"></h1>
    </div>
    <div class="tagline large-9 columns">
      <p>Bring down the suspension rates in schools.</p>
    </div>
  </header>
  <div class="row">
    <div class="large-12 columns person-grid">
        <ul class="person-list small-block-grid-4 medium-block-grid-5 large-block-grid-10">
          <li class="person-item0"><i class="icon ion-person person-size" id="0"></i></li>
          <li class="person-item1"><i class="icon ion-person person-size" id="1"></i></li>
          <li class="person-item2"><i class="icon ion-person person-size" id="2"></i></li>
          <li class="person-item3"><i class="icon ion-person person-size" id="3"></i></li>
          <li class="person-item4"><i class="icon ion-person person-size" id="4"></i></li>
          <li class="person-item5"><i class="icon ion-person person-size" id="5"></i></li>
          <li class="person-item6"><i class="icon ion-person person-size" id="6"></i></li>
          <li class="person-item7"><i class="icon ion-person person-size" id="7"></i></li>
          <li class="person-item8"><i class="icon ion-person person-size" id="8"></i></li>
          <li class="person-item9"><i class="icon ion-person person-size" id="9"></i></li>
          <li class="person-item10"><i class="icon ion-person person-size" id="10"></i></li>
          <li class="person-item11"><i class="icon ion-person person-size" id="11"></i></li>
          <li class="person-item12"><i class="icon ion-person person-size" id="12"></i></li>
          <li class="person-item13"><i class="icon ion-person person-size" id="13"></i></li>
          <li class="person-item14"><i class="icon ion-person person-size" id="14"></i></li>
          <li class="person-item15"><i class="icon ion-person person-size" id="15"></i></li>
          <li class="person-item16"><i class="icon ion-person person-size" id="16"></i></li>
          <li class="person-item17"><i class="icon ion-person person-size" id="17"></i></li>
          <li class="person-item18"><i class="icon ion-person person-size" id="18"></i></li>
          <li class="person-item19"><i class="icon ion-person person-size" id="19"></i></li>
          <li class="person-item20"><i class="icon ion-person person-size" id="20"></i></li>
          <li class="person-item21"><i class="icon ion-person person-size" id="21"></i></li>
          <li class="person-item22"><i class="icon ion-person person-size" id="22"></i></li>
          <li class="person-item23"><i class="icon ion-person person-size" id="23"></i></li>
          <li class="person-item24"><i class="icon ion-person person-size" id="24"></i></li>
          <li class="person-item25"><i class="icon ion-person person-size" id="25"></i></li>
          <li class="person-item26"><i class="icon ion-person person-size" id="26"></i></li>
          <li class="person-item27"><i class="icon ion-person person-size" id="27"></i></li>
          <li class="person-item28"><i class="icon ion-person person-size" id="28"></i></li>
          <li class="person-item29"><i class="icon ion-person person-size" id="29"></i></li>
          <li class="person-item30"><i class="icon ion-person person-size" id="30"></i></li>
          <li class="person-item31"><i class="icon ion-person person-size" id="31"></i></li>
          <li class="person-item32"><i class="icon ion-person person-size" id="32"></i></li>
          <li class="person-item33"><i class="icon ion-person person-size" id="33"></i></li>
          <li class="person-item34"><i class="icon ion-person person-size" id="34"></i></li>
          <li class="person-item35"><i class="icon ion-person person-size" id="35"></i></li>
          <li class="person-item36"><i class="icon ion-person person-size" id="36"></i></li>
          <li class="person-item37"><i class="icon ion-person person-size" id="37"></i></li>
          <li class="person-item38"><i class="icon ion-person person-size" id="38"></i></li>
          <li class="person-item39"><i class="icon ion-person person-size" id="39"></i></li>
          <li class="person-item40"><i class="icon ion-person person-size" id="40"></i></li>
          <li class="person-item41"><i class="icon ion-person person-size" id="41"></i></li>
          <li class="person-item42"><i class="icon ion-person person-size" id="42"></i></li>
          <li class="person-item43"><i class="icon ion-person person-size" id="43"></i></li>
          <li class="person-item44"><i class="icon ion-person person-size" id="44"></i></li>
          <li class="person-item45"><i class="icon ion-person person-size" id="45"></i></li>
          <li class="person-item46"><i class="icon ion-person person-size" id="46"></i></li>
          <li class="person-item47"><i class="icon ion-person person-size" id="47"></i></li>
          <li class="person-item48"><i class="icon ion-person person-size" id="48"></i></li>
          <li class="person-item49"><i class="icon ion-person person-size" id="49"></i></li>
          <li class="person-item50"><i class="icon ion-person person-size" id="50"></i></li>
          <li class="person-item51"><i class="icon ion-person person-size" id="51"></i></li>
          <li class="person-item52"><i class="icon ion-person person-size" id="52"></i></li>
          <li class="person-item53"><i class="icon ion-person person-size" id="53"></i></li>
          <li class="person-item54"><i class="icon ion-person person-size" id="54"></i></li>
          <li class="person-item55"><i class="icon ion-person person-size" id="55"></i></li>
          <li class="person-item56"><i class="icon ion-person person-size" id="56"></i></li>
          <li class="person-item57"><i class="icon ion-person person-size" id="57"></i></li>
          <li class="person-item58"><i class="icon ion-person person-size" id="58"></i></li>
          <li class="person-item59"><i class="icon ion-person person-size" id="59"></i></li>
          <li class="person-item60"><i class="icon ion-person person-size" id="60"></i></li>
          <li class="person-item61"><i class="icon ion-person person-size" id="61"></i></li>
          <li class="person-item62"><i class="icon ion-person person-size" id="62"></i></li>
          <li class="person-item63"><i class="icon ion-person person-size" id="63"></i></li>
          <li class="person-item64"><i class="icon ion-person person-size" id="64"></i></li>
          <li class="person-item65"><i class="icon ion-person person-size" id="65"></i></li>
          <li class="person-item66"><i class="icon ion-person person-size" id="66"></i></li>
          <li class="person-item67"><i class="icon ion-person person-size" id="67"></i></li>
          <li class="person-item68"><i class="icon ion-person person-size" id="68"></i></li>
          <li class="person-item69"><i class="icon ion-person person-size" id="69"></i></li>
          <li class="person-item70"><i class="icon ion-person person-size" id="70"></i></li>
          <li class="person-item71"><i class="icon ion-person person-size" id="71"></i></li>
          <li class="person-item72"><i class="icon ion-person person-size" id="72"></i></li>
          <li class="person-item73"><i class="icon ion-person person-size" id="73"></i></li>
          <li class="person-item74"><i class="icon ion-person person-size" id="74"></i></li>
          <li class="person-item75"><i class="icon ion-person person-size" id="75"></i></li>
          <li class="person-item76"><i class="icon ion-person person-size" id="76"></i></li>
          <li class="person-item77"><i class="icon ion-person person-size" id="77"></i></li>
          <li class="person-item78"><i class="icon ion-person person-size" id="78"></i></li>
          <li class="person-item79"><i class="icon ion-person person-size" id="79"></i></li>
          <li class="person-item80"><i class="icon ion-person person-size" id="80"></i></li>
          <li class="person-item81"><i class="icon ion-person person-size" id="81"></i></li>
          <li class="person-item82"><i class="icon ion-person person-size" id="82"></i></li>
          <li class="person-item83"><i class="icon ion-person person-size" id="83"></i></li>
          <li class="person-item84"><i class="icon ion-person person-size" id="84"></i></li>
          <li class="person-item85"><i class="icon ion-person person-size" id="85"></i></li>
          <li class="person-item86"><i class="icon ion-person person-size" id="86"></i></li>
          <li class="person-item87"><i class="icon ion-person person-size" id="87"></i></li>
          <li class="person-item88"><i class="icon ion-person person-size" id="88"></i></li>
          <li class="person-item89"><i class="icon ion-person person-size" id="89"></i></li>
          <li class="person-item90"><i class="icon ion-person person-size" id="90"></i></li>
          <li class="person-item91"><i class="icon ion-person person-size" id="91"></i></li>
          <li class="person-item92"><i class="icon ion-person person-size" id="92"></i></li>
          <li class="person-item93"><i class="icon ion-person person-size" id="93"></i></li>
          <li class="person-item94"><i class="icon ion-person person-size" id="94"></i></li>
          <li class="person-item95"><i class="icon ion-person person-size" id="95"></i></li>
          <li class="person-item96"><i class="icon ion-person person-size" id="96"></i></li>
          <li class="person-item97"><i class="icon ion-person person-size" id="97"></i></li>
          <li class="person-item98"><i class="icon ion-person person-size" id="98"></i></li>
          <li class="person-item99"><i class="icon ion-person person-size" id="99"></i></li>
        </ul>
        <article class="key">
          <ul>
            <li class="symbol african-american">African-American, not Hispanic</li>
            <li class="symbol latino">Hispanic or Latino</li>
            <li class="symbol other">Other</li>
          </ul>
        </article>
        <p class="chart-description">This chart shows the suspension rate of Oakland Unified School District in 2014.</p>
    </div>
  </div>
  <div class="mission-statement row">
    <div class="small-8 large-centered columns">
      <h2 class="title">About</h2>
      <p>
        <strong>No Suspend</strong> empowers Oakland community members by providing data to address escalating infraction and suspension rates among students of color in  the Oakland Unified School District. The app will bring awareness using statistics from the California Department of Education to demonstrate  the correlation between suspension rates and communities of color. No Suspend  app will work in conjunction with existing Oakland Unified School District programs to  eliminate racially disproportionate discipline practices. 
      </p>
    </div>
  </div>

  <div class="statistics row">
    <h2 class="title">Share these facts on Twitter:</h2>
    <div class="large-4 columns">
      <a href="http://twitter.com/share?text=1 in 5 African American boys in Oakland schools suspended last year&url=http://mbk-nosuspend.github.io/nosuspend/&hashtags=mbkhack,oakland,suspension" target="_blank" class="notecard">
        <h4>1/5</h4>
        <p>
        Researchers found that 1 out of 5 
        African American boys in Oakland
        were suspended from school 
        at least once last year. 
        </p>
      </a>
    </div>
    <div class="large-4 columns">
      <a href="http://twitter.com/share?text=Black males' suspension rates 6x that of white males&url=http://mbk-nosuspend.github.io/nosuspend/&hashtags=mbkhack,oakland,suspension" target="_blank" class="notecard">
        <h4>6x</h4>
        <p>
        Black males made up 42 percent of suspensions,
        a suspension rate six times higher than that
        of white males.
        </p>
      </a>
    </div>
    <div class="large-4 columns">
      <a href="http://twitter.com/share?text=About 1/5 of suspensions for OUSD in 2013-2015 classified ambiguously&url=http://mbk-nosuspend.github.io/nosuspend/&hashtags=mbkhack,oakland,suspension" target="_blank" class="notecard">
        <h4>20%</h4>
        <p>
        of suspensions for OUSD in 2013-2014 are categorized as "other" and therefore ambiguous to the public.
        </p>
      </a>
    </div>
  </div>
  <div class="share row">
    <div class="large-8 columns">
    </div>
    <div class="large-4 columns">
      <a class="btn twitter" href="http://twitter.com/share?text=Bring down the suspension rates in school&url=http://nosuspend.com/&hashtags=mbkhack,oakland,suspension" target="_blank"><i class="icon ion-social-twitter"></i> Share on Twitter</a>
      <a class="btn facebook" href="https://www.facebook.com/Suspendnomore" target="_blank"><i class="icon ion-social-facebook"></i>Like on Facebook</a>
    </div>
  </div>
 
  <footer class="row">
    <div class="large-12 columns">
      <hr/>
      <div class="row">
        <div class="large-8 columns">
          <p>Made in February 2015 by <strong>Team No Suspend</strong> at <a href="mbkhack.com">My Brother's Keeper Hackathon</a>, sponsored by <a href="http://qeyno.com">Qeyno Labs</a>.</p>
        </div>
        <div class="large-4 columns">
          <ul class="inline-list right">
            <li><a href="http://twitter.com/SuspendNomore">Twitter</a></li>
            <li><a href="http://www.facebook.com/Suspendnomore">Facebook</a></li>
            <li><a href="http://instagram.com/NoSuspend">Instagram</a></li>
          </ul>
        </div>
      </div>
    </div>
  </footer>

  <script src="js/jquery-2.1.3.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.0/js/foundation.min.js"></script>
  <script>
    $(document).foundation();
    var doc = document.documentElement;
    doc.setAttribute('data-useragent', navigator.userAgent);
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
  <script>

    // NEED TO UPDATE THIS CODE TO FETCH REMOTE JSON, NOT LOCAL FILE
    function loadJSON(callback) {   
      var xobj = new XMLHttpRequest();
          xobj.overrideMimeType("application/json");
      xobj.open('GET', '../data.json', true); // Replace 'my_data' with the path to your file
      xobj.onreadystatechange = function () {
            if (xobj.readyState == 4 && xobj.status == "200") {
              // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode
              callback(xobj.responseText);
            }
      };
      xobj.send(null);  
    }
    $(document).ready(function() {
      loadJSON(function(response) {
        // Parse JSON string into object
        var data = JSON.parse(response)["ethnicities"];
        var ethnicities = Object.keys(data);
        
        ethnicities.sort(function(a, b) {
          if (a.indexOf('african') == 0) {
            return -1;
          }
          if (b.indexOf('african') == 0) {
            return 1;
          }
          if (a.indexOf('hispanic') == 0 && b.indexOf('african') == -1) {
            return -1;
          }
          if (a.indexOf('african') == -1 && b.indexOf('hispanic') == 0) {
            return 1;
          }
          return 0;
        });

        var total = 0,
            percents = [],
            colors = ["#211C5C","#2692d0","#CCC","#CCC","#CCC","#CCC","#CCC","#CCC", "#CCC", "#CCC"];
        // get total number of suspensions
        for(key in data){
          total = total + parseInt(data[key]);
        }
        // normalize suspension data to 100%
        for(var e = 0; e < ethnicities.length; e++) {
          percents.push(Math.round(parseInt(data[ethnicities[e]])/total*100));
        }
        console.log(percents);
        var i = 0, c=0;
        for (var perc = 0; perc < percents.length; perc++){
          var percent = percents[perc];
          for (var p = 0; p < percent; p++) {
            $("i.ion-person#" + i).css("color",colors[c]);
            console.log("c: " + c + ", " + "i: " + i);
            i++
          };
          c++
        }
      });
    });
    // fade in animation
    $(document).ready(function() {
      var personSize = ($('.person-list').children().size());
      var personListItem = $('.person-list li');
      personListItem.hide();

      for (var i = 0; i <= personSize; i++) {
        $('.person-item0').fadeIn(1000);
        $('.person-item' + (i + 1)).hide().delay(20 * i).fadeIn(1000);
      };
    });
  </script>
</body>
</html>
